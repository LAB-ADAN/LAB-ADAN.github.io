{% raw %}
<!-- Mermaid loader: tries ESM import first, falls back to UMD -->
<script type="module">
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
  // configure as needed
  mermaid.initialize({ startOnLoad: true, theme: "default" });
</script>

<!-- UMD fallback for environments where module import is blocked -->
<script nomodule src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script nomodule>
  if (window.mermaid) {
    try {
      window.mermaid.initialize({ startOnLoad: true, theme: "default" });
    } catch (e) {
      console.warn("Mermaid init failed:", e);
    }
  }
</script>
{% endraw %}
